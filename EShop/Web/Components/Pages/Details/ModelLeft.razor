@using Models.ViewModels
@using Services.Interfaces
@using Telerik.Blazor
@using Telerik.Blazor.Components
@using Telerik.FontIcons
@using Telerik.SvgIcons
@inject IProductService ProductService
<TelerikRootComponent>
    <span>Blazor</span>
    <div class="model-data-left-container">
        <div class="model-data-row">
            <span class="title">Product Name</span>
            <span class="value">@Model.Name</span>
        </div>
        <div class="model-data-row">
            <span class="title">Product No</span>
            <span class="value">@Model.ProductNumber</span>
        </div>
        @if (Model.Size != null)
        {
            <div class="model-data-row">
                <span class="title">Size</span>
                <span class="value size">

                    <TelerikDropDownList Data="@availableSizes"
                                         @bind-Value="@Model.Size"
                                         TextField="@Model.Size"
                                         ValueField="@Model.Size"
                                         DefaultText="Select a size..."
                                         Width="100%">
                    </TelerikDropDownList>
                @* .Events(e => e.Change(@<text>function () { selectAlternateProductVersion(@Model.ModelId); }</text>)) *@
                </span>
            </div>
        }
        @if (Model.Weight != 0)
        {
            <div class="model-data-row">
                <span class="title">Weight</span>
                <span class="value">@Model.Weight</span>
            </div>
        }
        @if (Model.Color != null)
        {
            <div class="model-data-row">
                <span class="title">Color</span>
                <div class="value">@Model.Color</div>
            </div>
        }
        @if (Model.Description != null)
        {
            <div class="model-data-row">
                <span class="title">Description</span>
                <span class="value model-description">@Model.Description</span>
            </div>
        }
    </div>
</TelerikRootComponent>

@code {
    [Parameter]
    public ProductDetailsViewModel Model { get; set; } = new();

    private string[]? availableSizes;

    protected override async Task OnInitializedAsync()
    {
        var results = await ProductService.GetAvailableSizes(Model.Id);
        availableSizes = results.ToArray();
    }
}
